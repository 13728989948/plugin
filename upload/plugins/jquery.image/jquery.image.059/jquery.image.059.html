<!DOCTYPE HTML>
<html>
 <head>
  <!-- SEO优化 -->
  <title>jquery.image.059</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

  <!-- CSS和JS导入区 -->
  <link href="css/jquery.image.059.css" rel="stylesheet" type="text/css" media="all" />
  <link href="css/jquery.image.059.demo.css" rel="stylesheet" type="text/css" media="all" />
  <script src="../../jquery.min.js" type="text/javascript" charset="UTF-8"></script>
  <script src="js/jquery.imgareaselect.js" type="text/javascript" charset="UTF-8"></script>
 </head>

 <body>
  <div id="root">
   <div id="main">
    <div class="container demo">
     <div style="float: left; width: 50%;">
      <p class="instructions">
       单击并拖动鼠标在图像上选择一个区域。
      </p>
      <div class="frame" style="margin: 0 0.3em; width:300px;height:300px;">
       <img id="photo" src="images/jquery.image.059_005.jpg">
      </div>
     </div>
     <div style="float: left; width: 50%;">
      <p style="font-size: 110%; font-weight: bold; padding-left:0.1em;">
       选择预览
      </p>
      <div class="frame" style="margin:0 1em;width:100px;height:100px;">
       <div id="preview" style="width:100px;height:100px;overflow:hidden;">
        <img src="images/jquery.image.059_005.jpg" style="width:100px;height:100px;">
       </div>
      </div>
      <table style="margin-top: 1em;">
       <thead>
        <tr>
         <th colspan="2" style="font-size:110%;font-weight:bold;text-align:left;padding-left:0.1em;">
          坐标
         </th>
         <th colspan="2" style="font-size:110%;font-weight:bold;text-align:left;padding-left:0.1em;">
          维度
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td style="width: 10%;">
          <b>X<sub>1</sub>:</b>
         </td>
         <td style="width: 30%;">
          <input type="text" id="x1" value="-">
         </td>
         <td style="width: 20%;">
          <b>Width:</b>
         </td>
         <td>
          <input type="text" value="-" id="w">
         </td>
        </tr>
        <tr>
         <td>
          <b>Y<sub>1</sub>:</b>
         </td>
         <td>
          <input type="text" id="y1" value="-">
         </td>
         <td>
          <b>Height:</b>
         </td>
         <td>
          <input type="text" id="h" value="-">
         </td>
        </tr>
        <tr>
         <td>
          <b>X<sub>2</sub>:</b>
         </td>
         <td>
          <input type="text" id="x2" value="-">
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          <b>Y<sub>2</sub>:</b>
         </td>
         <td>
          <input type="text" id="y2" value="-">
         </td>
         <td>
         </td>
         <td>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>
  </div>
 </body>
<script type="text/javascript">
function preview(img, selection) {
    if (!selection.width || !selection.height)
        return;
    var scaleX = 100 / selection.width;
    var scaleY = 100 / selection.height;
    $('#preview img').css({
        width: Math.round(scaleX * 300),
        height: Math.round(scaleY * 300),
        marginLeft: -Math.round(scaleX * selection.x1),
        marginTop: -Math.round(scaleY * selection.y1)
    });
    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);
}
$(function () {
    $('#photo').imgAreaSelect({
        aspectRatio: '1:1', handles: true,
        fadeSpeed: 200, onSelectChange: preview
    });
});
</script>
</html>